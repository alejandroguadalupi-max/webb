<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Carta — PataMig</title>

<!-- Fuentes -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ================= VARIABLES ================= */
:root{
  --bg:#f4f4f4;
  --card:#ffffff;
  --text:#262626;
  --muted:#6d6d6d;
  --accent:#68B553;
  --maxw:900px;
  --gap:16px;
  --radius:20px;
  --shadow:0 8px 26px rgba(0,0,0,0.08);
  --font-size:1rem;
}
[data-theme="dark"]{
  --bg:#111213;
  --card:#1a1b1d;
  --text:#e8e8e8;
  --muted:#a5a5a5;
  --shadow:0 8px 30px rgba(0,0,0,0.45);
}

/* ================= BASE ================= */
*{box-sizing:border-box;}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:"Inter", sans-serif;
  line-height:1.5;
  font-size:var(--font-size);
  -webkit-tap-highlight-color:transparent;
}

.wrap{
  max-width:var(--maxw);
  padding:18px;
  margin:auto;
}

/* ================= HEADER ================= */
header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:18px;
}

.back-btn{
  text-decoration:none;
  padding:10px 16px;
  background:var(--card);
  color:var(--text);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  font-weight:600;
  transition:.25s;
}
.back-btn:hover{transform:scale(1.05);} 

.controls{display:flex; gap:10px; align-items:center;}

.font-btn{
  background:var(--card);
  padding:6px 10px;
  border-radius:10px;
  border:none;
  box-shadow:var(--shadow);
  font-weight:700;
  cursor:pointer;
}

.theme-switch{position:relative; width:52px; height:30px;}
.theme-switch input{display:none}
.slider{
  width:100%; height:100%;
  background:#bdbdbd;
  border-radius:50px;
  position:relative;
}
.slider:before{
  content:"";
  position:absolute;
  width:24px; height:24px;
  border-radius:50%;
  background:#fff;
  top:3px; left:3px;
  transition:.25s;
}
.theme-switch input:checked + .slider{background:var(--accent);} 
.theme-switch input:checked + .slider:before{transform:translateX(22px);} 

/* ================= CARD ================= */
.card{
  background:var(--card);
  padding:22px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}

/* ================= LISTA ================= */
h2{
  margin:0 0 12px;
  color:var(--accent);
  font-size:1.2rem;
  font-weight:700;
}

ul.menu{
  list-style:none;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:16px;
}

li.item{
  display:flex;
  justify-content:space-between;
  gap:16px;
  padding:14px;
  background:rgba(255,255,255,0.06);
  border-radius:var(--radius);
  transition:.25s;
}

.name{font-size:1.05rem; font-weight:700;}
.desc{font-size:0.95rem; color:var(--muted);} 
.price{font-weight:700; white-space:nowrap;}

.add-btn{
  margin-top:8px;
  background:var(--accent);
  color:white;
  padding:6px 12px;
  border-radius:10px;
  font-size:0.85rem;
  cursor:pointer;
  border:none;
}

/* ================= PANEL FLOTANTE ================= */
#pedidoBtn{
  position:fixed;
  bottom:20px; right:20px;
  background:var(--accent);
  padding:14px 22px;
  border-radius:50px;
  color:white;
  font-weight:700;
  display:none;
  box-shadow:var(--shadow);
}

/* ================= PANEL SELECCIÓN ================= */
#panelPedido{
  position:fixed;
  bottom:0; left:0; right:0;
  background:var(--card);
  border-radius:22px 22px 0 0;
  box-shadow:0 -10px 30px rgba(0,0,0,.35);
  padding:24px;
  display:none;
}

#panelPedido h3{text-align:center; margin-top:0;}

.pedido-item{
  display:flex;
  justify-content:space-between;
  gap:10px;
  padding:10px 0;
  border-bottom:1px solid rgba(0,0,0,0.15);
}

textarea.nota{
  width:100%;
  margin-top:6px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.2);
  padding:8px;
  resize:none;
  font-size:0.9rem;
}

.remove-btn{
  color:var(--accent);
  font-weight:700;
  cursor:pointer;
}

</style>
</head>

<body>

<div class="wrap">
  <header>
    <a class="back-btn" href="principal.html">← Inicio</a>
    <h1 style="font-size:1.4rem; margin:0;">PataMig — Carta</h1>

    <div class="controls">
      <button class="font-btn" id="fontMinus">A–</button>
      <button class="font-btn" id="fontPlus">A+</button>

      <label class="theme-switch">
        <input id="themeToggle" type="checkbox">
        <span class="slider"></span>
      </label>
    </div>
  </header>

  <div class="card">
    <section>
      <h2>Entrantes / Tapas</h2>
      <ul class="menu">

        <li class="item">
          <div class="info">
            <div class="name">Croquetas de la abuela</div>
            <div class="desc">Cremosas, con jamón ibérico y queso manchego.</div>
            <button class="add-btn" onclick="addPlato('Croquetas de la abuela')">Añadir</button>
          </div>
          <div class="price">6,50€</div>
        </li>

        <li class="item">
          <div class="info">
            <div class="name">Tostas de setas al ajillo</div>
            <div class="desc">Shiitake y boletus salteados al ajo.</div>
            <button class="add-btn" onclick="addPlato('Tostas de setas al ajillo')">Añadir</button>
          </div>
          <div class="price">7,00€</div>
        </li>

      </ul>
    </section>
  </div>

  <footer style="margin-top:20px; text-align:center; opacity:0.7;">
    <small>Si tiene alergias, consulte al personal. Precios con IVA incluido.</small>
  </footer>
</div>

<div id="pedidoBtn" onclick="abrirPedido()">Ver selección (0)</div>

<div id="panelPedido">
  <h3>Tu selección</h3>
  <div id="listaPedido"></div>
</div>

<script>
/* ================= THEME ================= */
(function(){
  const toggle = document.getElementById('themeToggle');
  const current = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', current);
  toggle.checked = current === 'dark';

  toggle.addEventListener('change',()=>{
    const t = toggle.checked ? 'dark':'light';
    document.documentElement.setAttribute('data-theme', t);
    localStorage.setItem('theme', t);
  });
})();

/* ================= FONT SIZE ================= */
let fontSize = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--font-size'));

fontPlus.onclick = ()=>{
  fontSize += .05;
  document.documentElement.style.setProperty('--font-size', fontSize + 'rem');
};

fontMinus.onclick = ()=>{
  if(fontSize > .7){
    fontSize -= .05;
    document.documentElement.style.setProperty('--font-size', fontSize + 'rem');
  }
};

/* ================= PEDIDO ================= */
let pedido = JSON.parse(localStorage.getItem('pedido') || '[]');
let notas = JSON.parse(localStorage.getItem('notas') || '[]');

function actualizarBtn(){
  const btn = document.getElementById('pedidoBtn');
  if(pedido.length === 0) btn.style.display='none';
  else{
    btn.style.display='block';
    btn.textContent = `Ver selección (${pedido.length})`;
  }
}
actualizarBtn();

function addPlato(nombre){
  pedido.push(nombre);
  notas.push("");
  localStorage.setItem('pedido', JSON.stringify(pedido));
  localStorage.setItem('notas', JSON.stringify(notas));
  actualizarBtn();
}

function abrirPedido(){
  const panel = document.getElementById('panelPedido');
  panel.style.display='block';

  const cont = document.getElementById('listaPedido');
  cont.innerHTML='';

  pedido.forEach((p,i)=>{
    cont.innerHTML += `
      <div class="pedido-item">
        <div style="flex:1;">
          <strong>${p}</strong>
          <textarea class="nota" placeholder="Añadir nota..." oninput="guardarNota(${i}, this.value)">${notas[i]||''}</textarea>
        </div>
        <span class="remove-btn" onclick="removePlato(${i})">✕</span>
      </div>
    `;
  });
}

function guardarNota(i, texto){
  notas[i] = texto;
  localStorage.setItem('notas', JSON.stringify(notas));
}

function removePlato(i){
  pedido.splice(i,1);
  notas.splice(i,1);
  localStorage.setItem('pedido', JSON.stringify(pedido));
  localStorage.setItem('notas', JSON.stringify(notas));
  abrirPedido();
  actualizarBtn();
}
</script>

</body>
</html>