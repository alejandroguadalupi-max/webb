<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, maximum-scale=1" />
<title>Men√∫</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root {
  /* --- Variables Base (Se sobreescriben por JS) --- */
  --bg-body: #ffffff;
  --bg-card: #ffffff;
  
  --text-main: #2d3436;
  --text-sec: #636e72;
  
  /* Color Principal Din√°mico */
  --primary: #68B553; 
  --primary-dark: #509e3c;
  --primary-light: #eafbe4;
  
  --shadow-card: 0 4px 20px rgba(0,0,0,0.06);
  --shadow-float: 0 15px 35px rgba(0, 0, 0, 0.2);
  
  --border: #f1f2f6;
  --radius: 16px;
  --font: 'Plus Jakarta Sans', sans-serif;
  
  --spanish-btn: #FFC107; 
}

[data-theme="dark"] {
  --bg-body: #121212;
  --bg-card: #1e1e1e;
  --text-main: #f5f6fa;
  --text-sec: #a4b0be;
  /* En dark mode, el primary se mantiene o ajusta ligeramente */
  --shadow-card: 0 4px 20px rgba(0,0,0,0.4);
  --border: #2f3640;
  --spanish-btn: #FFD54F;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0; background: var(--bg-body); color: var(--text-main); font-family: var(--font);
  transition: background 0.3s ease; padding-bottom: 120px;
}

/* --- HEADER --- */
.header {
  background: var(--bg-card);
  padding: 15px 20px; 
  display: flex; justify-content: space-between; align-items: center;
  position: sticky; top: 0; z-index: 800;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.brand-area { display: flex; flex-direction: column; }
.brand-name {
  font-size: 1.6rem; 
  font-weight: 800; 
  color: var(--primary); 
  margin: 0; line-height: 1;
  text-transform: capitalize;
}
.brand-category { font-size: 0.8rem; opacity: 0.7; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }

/* Grupo Derecho */
.header-right { display: flex; align-items: center; gap: 10px; }

.lang-badge {
  font-size: 0.75rem; font-weight: 800; border: 1px solid var(--border); 
  background: var(--bg-body); color: var(--text-sec); 
  padding: 6px 10px; border-radius: 50px; cursor: default;
}

.theme-btn { 
  background: none; border: none; cursor: pointer; padding: 4px; 
  color: var(--text-main); display: flex; align-items: center; justify-content: center;
}
.theme-btn svg { width: 22px; height: 22px; }

/* FILTROS Y ALERGIAS */
.controls-area {
  padding: 15px 20px 5px 20px;
  background: var(--bg-body);
}

.allergy-select {
  width: 100%;
  appearance: none; -webkit-appearance: none;
  background: var(--bg-card); 
  border: 1px solid var(--border); 
  color: var(--text-main); font-family: inherit;
  font-size: 0.9rem; font-weight: 600;
  padding: 10px 16px; border-radius: 12px;
  cursor: pointer; outline: none; margin-bottom: 15px;
}

/* Scroll Horizontal Filtros */
.filters-scroll { 
  display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; 
}
.filters-scroll::-webkit-scrollbar { display: none; }

.filter-pill {
  padding: 8px 18px; 
  background: var(--bg-card); 
  border: 1px solid var(--border); 
  border-radius: 50px; 
  white-space: nowrap; 
  font-size: 0.9rem; font-weight: 600; 
  color: var(--text-sec); cursor: pointer; transition: 0.2s;
}
.filter-pill.active { 
  color: #fff; /* Texto siempre blanco para contraste */
  background: var(--primary); 
  border-color: var(--primary); 
  box-shadow: 0 4px 12px var(--primary-light); 
}

/* MENU GRID */
.menu-grid { display: flex; flex-direction: column; gap: 16px; padding: 10px 20px; max-width: 800px; margin: 0 auto; }

.dish-card {
  background: var(--bg-card); border-radius: var(--radius); padding: 16px;
  display: flex; align-items: flex-start; justify-content: space-between; gap: 12px;
  box-shadow: var(--shadow-card); border: 1px solid transparent; transition: 0.2s;
}
/* Borde sutil al hover en desktop o active en mobile */
.dish-card:active { border-color: var(--primary); transform: scale(0.99); }

.dish-info { flex: 1; }
.dish-header { display: flex; justify-content: space-between; margin-bottom: 4px; }
.dish-name { font-weight: 700; font-size: 1.05rem; line-height: 1.2; color: var(--text-main); }
.dish-desc { font-size: 0.85rem; color: var(--text-sec); line-height: 1.4; margin-top: 6px; }

.dish-actions { display: flex; flex-direction: column; align-items: flex-end; gap: 8px; min-width: 70px; }
.dish-price { font-weight: 800; font-size: 1rem; color: var(--primary); }

.add-btn {
  background: var(--bg-body); color: var(--primary); 
  border: 1px solid var(--primary); 
  height: 34px; padding: 0 14px; 
  border-radius: 10px; font-size: 1.2rem; font-weight: 700; 
  cursor: pointer; transition: 0.2s;
  display: flex; align-items: center; justify-content: center;
}
.add-btn.active { 
  background: var(--primary); color: #fff; 
  box-shadow: 0 4px 10px var(--primary-light);
}

/* FLOAT CART BUTTON */
#cart-float {
  position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(150px) scale(0.9);
  background: var(--text-main); color: var(--bg-card); 
  padding: 16px 28px; border-radius: 100px; 
  display: flex; align-items: center; gap: 12px; justify-content: center;
  box-shadow: var(--shadow-float); cursor: pointer; z-index: 1000; transition: 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  font-weight: 700; font-size: 1rem;
}
#cart-float.visible { transform: translateX(-50%) translateY(0) scale(1); }
.badge-count { background: var(--primary); color: #fff; padding: 2px 8px; border-radius: 50px; font-size: 0.8rem; font-weight: 800; }

/* --- SHEET / MODAL (Igual que antes pero adaptado) --- */
.overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
  z-index: 2000; opacity: 0; pointer-events: none; transition: 0.3s; display: flex; justify-content: center; align-items: flex-end;
}
.overlay.open { opacity: 1; pointer-events: auto; }

.sheet {
  background: var(--bg-card); width: 100%; max-width: 600px; max-height: 90vh; border-radius: 24px 24px 0 0;
  padding: 24px; display: flex; flex-direction: column; transform: translateY(100%); transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
}
.overlay.open .sheet { transform: translateY(0); }

.sheet-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border); }

/* Waiter Controls */
.waiter-box { background: var(--bg-body); border-radius: 12px; padding: 15px; margin-bottom: 15px; display: none; }
.translate-btn {
  width: 100%; padding: 12px; border-radius: 10px; background: var(--border); border: none;
  font-weight: 700; cursor: pointer; color: var(--text-sec); display: flex; align-items: center; justify-content: center; gap: 8px;
}
.translate-btn.active { background: var(--spanish-btn); color: #000; }

.order-list { overflow-y: auto; flex: 1; display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px; }

.order-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px dashed var(--border); }
.order-item:last-child { border-bottom: none; }

.qty-controls { display: flex; align-items: center; gap: 10px; }
.qty-btn { width: 30px; height: 30px; border-radius: 50%; border: 1px solid var(--border); background: var(--bg-body); color: var(--text-main); font-weight: 700; cursor: pointer; }

/* MODO CAMARERO ESTILOS */
.sheet.waiter-mode { height: 100% !important; max-height: 100vh; border-radius: 0; z-index: 3000; padding-top: 60px; }
.sheet.waiter-mode .order-item { padding: 20px 0; border-bottom: 2px solid var(--border); }
.sheet.waiter-mode .order-name { font-size: 1.4rem; font-weight: 800; }
.sheet.waiter-mode .waiter-qty-big { font-size: 1.8rem; font-weight: 900; color: var(--primary); margin-right: 15px; display: block; }
.waiter-qty-big { display: none; }

#closeWaiterBtn {
  position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: #000; color: #fff;
  border-radius: 50%; display: none; align-items: center; justify-content: center; font-size: 1.2rem; cursor: pointer; z-index: 3001;
}

textarea.notes {
  width: 100%; padding: 12px; border-radius: 12px; background: var(--bg-body); border: 1px solid var(--border);
  color: var(--text-main); font-family: inherit; resize: none; outline: none; margin-bottom: 10px;
}

.clear-link { text-align: center; font-size: 0.9rem; color: var(--text-sec); text-decoration: underline; cursor: pointer; margin-top: 10px; }

</style>
</head>
<body>

<header class="header">
  <div class="brand-area">
    <h1 class="brand-name" id="brandNameDisplay">Restaurante</h1>
    <span class="brand-category" id="catDisplay">Menu</span>
  </div>
  
  <div class="header-right">
    <div class="lang-badge" id="langDisplay">ES</div>
    <button class="theme-btn" id="themeBtn"></button>
  </div>
</header>

<div class="controls-area">
  <select id="allergyFilter" class="allergy-select" onchange="render()">
    <option value="">üå± Filtrar Alergias / Dietas</option>
    <option value="gf">üåæ Sin Gluten</option>
    <option value="lf">ü•õ Sin Lactosa</option>
    <option value="v">ü•¶ Vegano</option>
  </select>

  <div class="filters-scroll">
    <button class="filter-pill active" onclick="filter('bebidas')" id="f-drk">Bebidas</button>
    <button class="filter-pill" onclick="filter('entrantes')" id="f-ent">Entrantes</button>
    <button class="filter-pill" onclick="filter('principales')" id="f-main">Principales</button>
    <button class="filter-pill" onclick="filter('postres')" id="f-des">Postres</button>
  </div>
</div>

<div class="menu-grid" id="menuContainer">
  </div>

<div id="cart-float" onclick="openSheet()">
  <span class="badge-count" id="countBadge">0</span>
  <span id="btnText">Ver Pedido</span>
</div>

<div class="overlay" id="overlay" onclick="if(event.target===this) closeSheet()">
  <button id="closeWaiterBtn" onclick="exitWaiterMode()">‚úï</button>

  <div class="sheet" id="orderSheet">
    <div class="sheet-header">
      <h3 style="margin:0; font-size:1.4rem" id="modalTitle">Tu Pedido</h3>
      <div onclick="closeSheet()" style="cursor:pointer; padding:5px; opacity:0.5; font-size:1.5rem">√ó</div>
    </div>
    
    <div class="waiter-box" id="waiterBox">
      <button id="translateBtn" class="translate-btn" onclick="enterWaiterMode()">
        <span>üó£Ô∏è</span> <span id="transText">Mostrar al Camarero (ES)</span>
      </button>
    </div>
    
    <div class="order-list" id="orderList"></div>

    <div class="notes-container" id="notesArea">
      <textarea class="notes" id="notesField" placeholder="Notas (ej. sin hielo, carne muy hecha...)" oninput="saveNotes()"></textarea>
    </div>
    
    <div onclick="clearCart()" class="clear-link" id="clearTxt">Borrar todo</div>
  </div>
</div>

<script>
/* --- 1. CONFIGURACI√ìN DIN√ÅMICA (PALETAS Y MEN√öS) --- */
const config = {
  // Paletas de Colores
  palettes: {
    'hamburgueseria': { primary: '#FF8C00', light: '#FFF3E0', dark: '#E65100' },
    'pizzeria':       { primary: '#D32F2F', light: '#FFEBEE', dark: '#B71C1C' },
    'asiatico':       { primary: '#E91E63', light: '#FCE4EC', dark: '#C2185B' },
    'cafe':           { primary: '#8D6E63', light: '#EFEBE9', dark: '#5D4037' },
    'restaurante':    { primary: '#2E7D32', light: '#E8F5E9', dark: '#1B5E20' }, // Default
    'default':        { primary: '#68B553', light: '#eafbe4', dark: '#509e3c' }
  },
  
  // Men√∫s Diferentes seg√∫n Categor√≠a
  menus: {
    'pizzeria': [
       { id: 101, cat: 'entrantes', tags: ['v'], price: 9.00, name: {es:"Provolone Fundido", en:"Melted Provolone"}, desc: {es:"Con tomate y or√©gano", en:"Tomato & oregano"} },
       { id: 102, cat: 'principales', tags: [], price: 12.00, name: {es:"Pizza Margarita", en:"Pizza Margherita"}, desc: {es:"Tomate, mozzarella, albahaca", en:"Tomato, mozzarella, basil"} },
       { id: 103, cat: 'principales', tags: [], price: 14.50, name: {es:"Pizza Diavola", en:"Pizza Diavola"}, desc: {es:"Picante con salami", en:"Spicy salami"} },
       { id: 104, cat: 'postres', tags: [], price: 6.00, name: {es:"Tiramis√∫", en:"Tiramisu"}, desc: {es:"Casero", en:"Homemade"} }
    ],
    'hamburgueseria': [
       { id: 201, cat: 'entrantes', tags: ['v'], price: 7.50, name: {es:"Nachos con Queso", en:"Cheese Nachos"}, desc: {es:"Con guacamole", en:"With guacamole"} },
       { id: 202, cat: 'principales', tags: [], price: 11.50, name: {es:"Burger Cl√°sica", en:"Classic Burger"}, desc: {es:"Queso cheddar y bacon", en:"Cheddar & bacon"} },
       { id: 203, cat: 'principales', tags: ['v'], price: 12.00, name: {es:"Burger Vegana", en:"Vegan Burger"}, desc: {es:"Heura y aguacate", en:"Heura & avocado"} },
       { id: 204, cat: 'postres', tags: [], price: 5.50, name: {es:"Brownie", en:"Brownie"}, desc: {es:"Con helado", en:"With ice cream"} }
    ],
    'asiatico': [
       { id: 301, cat: 'entrantes', tags: [], price: 5.50, name: {es:"Gyozas de Pollo", en:"Chicken Gyozas"}, desc: {es:"4 unidades", en:"4 units"} },
       { id: 302, cat: 'principales', tags: [], price: 13.00, name: {es:"Ramen Tonkotsu", en:"Tonkotsu Ramen"}, desc: {es:"Caldo de cerdo y fideos", en:"Pork broth noodles"} },
       { id: 303, cat: 'principales', tags: ['gf'], price: 15.00, name: {es:"Sushi Mix (12p)", en:"Sushi Mix (12p)"}, desc: {es:"Salm√≥n y at√∫n", en:"Salmon & tuna"} },
       { id: 304, cat: 'postres', tags: ['gf'], price: 4.50, name: {es:"Mochi de T√© Verde", en:"Green Tea Mochi"}, desc: {es:"2 unidades", en:"2 units"} }
    ],
    'cafe': [
       { id: 401, cat: 'entrantes', tags: ['v'], price: 3.50, name: {es:"Croissant Mantequilla", en:"Butter Croissant"}, desc: {es:"Reci√©n horneado", en:"Freshly baked"} },
       { id: 402, cat: 'principales', tags: ['v'], price: 8.50, name: {es:"Tostada Aguacate", en:"Avocado Toast"}, desc: {es:"Con huevo poch√©", en:"Poached egg"} },
       { id: 403, cat: 'principales', tags: [], price: 9.00, name: {es:"Sandwich Club", en:"Club Sandwich"}, desc: {es:"Pollo, bacon, lechuga", en:"Chicken, bacon, lettuce"} },
       { id: 404, cat: 'bebidas', tags: ['gf'], price: 4.00, name: {es:"Smoothie Verde", en:"Green Smoothie"}, desc: {es:"Espinacas y manzana", en:"Spinach & apple"} }
    ],
    // Bebidas Comunes (se a√±aden siempre)
    'comunes': [
       { id: 901, cat: 'bebidas', tags: ['gf','v'], price: 2.50, name: {es:"Coca-Cola", en:"Coke"}, desc: {es:"33cl", en:"33cl"} },
       { id: 902, cat: 'bebidas', tags: ['gf','v'], price: 2.00, name: {es:"Agua", en:"Water"}, desc: {es:"50cl", en:"50cl"} },
       { id: 903, cat: 'bebidas', tags: ['gf'], price: 3.00, name: {es:"Cerveza", en:"Beer"}, desc: {es:"Local", en:"Local"} }
    ]
  }
};

/* --- ESTADO --- */
let cart = {};
let activeCategory = 'principales'; // Categor√≠a por defecto al entrar
let lang = 'es';
let currentMenu = [];
let userCategory = 'restaurante'; // Tipo de restaurante detectado

/* --- INIT --- */
function init() {
  const params = new URLSearchParams(window.location.search);
  
  // 1. Configurar Idioma
  lang = localStorage.getItem('userLang') || navigator.language.slice(0,2) || 'es';
  document.getElementById('langDisplay').innerText = lang.toUpperCase();
  
  // 2. Detectar Restaurante y Categor√≠a
  const name = params.get('n') || "Restaurante";
  userCategory = params.get('categoria') || 'restaurante';
  
  document.getElementById('brandNameDisplay').innerText = name;
  document.getElementById('catDisplay').innerText = userCategory.toUpperCase();
  
  // 3. Aplicar Paleta de Colores
  const palette = config.palettes[userCategory] || config.palettes['default'];
  const root = document.documentElement.style;
  root.setProperty('--primary', palette.primary);
  root.setProperty('--primary-light', palette.light);
  root.setProperty('--primary-dark', palette.dark);

  // 4. Construir Men√∫ (Espec√≠fico + Comunes)
  // Si no existe men√∫ espec√≠fico, usar hamburgueser√≠a como fallback gen√©rico
  const specificMenu = config.menus[userCategory] || config.menus['restaurante'] || config.menus['hamburgueseria'];
  currentMenu = [...specificMenu, ...config.menus['comunes']];

  // 5. Cargar Carrito
  loadCart();
  
  // 6. Traducir Interfaz Est√°tica
  translateUI();
  
  // 7. Renderizar
  render();
  updateFloat();
}

/* --- RENDERIZADO --- */
function render() {
  const container = document.getElementById('menuContainer');
  container.innerHTML = '';
  
  const allergyFilter = document.getElementById('allergyFilter').value;

  // Filtrar platos
  const items = currentMenu.filter(item => {
    // Filtro por categor√≠a actual (pestanas)
    if(item.cat !== activeCategory) return false;
    // Filtro por alergia
    if(allergyFilter && !item.tags.includes(allergyFilter)) return false;
    return true;
  });

  if(items.length === 0) {
    container.innerHTML = `<div style="text-align:center; padding:40px; color:var(--text-sec)">No hay productos aqu√≠.</div>`;
    return;
  }

  items.forEach(p => {
    const qty = cart[p.id] || 0;
    const btnClass = qty > 0 ? 'add-btn active' : 'add-btn';
    const btnContent = qty > 0 ? `${qty}` : '+';
    
    // Obtener nombre en idioma actual o fallback a ES
    const pName = p.name[lang] || p.name['es'];
    const pDesc = p.desc[lang] || p.desc['es'];

    container.innerHTML += `
      <div class="dish-card">
        <div class="dish-info">
          <div class="dish-header">
            <span class="dish-name">${pName}</span>
          </div>
          <div class="dish-desc">${pDesc}</div>
        </div>
        <div class="dish-actions">
          <span class="dish-price">${p.price.toFixed(2)}‚Ç¨</span>
          <button class="${btnClass}" onclick="add(${p.id})">${btnContent}</button>
        </div>
      </div>
    `;
  });
}

/* --- FUNCIONALIDAD PESTA√ëAS --- */
function filter(cat) {
  activeCategory = cat;
  document.querySelectorAll('.filter-pill').forEach(el => el.classList.remove('active'));
  
  // Mapeo simple de IDs botones
  const map = { 'bebidas':'f-drk', 'entrantes':'f-ent', 'principales':'f-main', 'postres':'f-des' };
  document.getElementById(map[cat]).classList.add('active');
  
  render();
}

/* --- CARRITO --- */
function add(id) {
  cart[id] = (cart[id] || 0) + 1;
  saveCart();
  render(); // Actualiza botones lista
  updateFloat();
  if(document.getElementById('overlay').classList.contains('open')) renderList(); // Actualiza modal si abierto
}

function remove(id) {
  if(cart[id]) {
    cart[id]--;
    if(cart[id] <= 0) delete cart[id];
  }
  saveCart();
  renderList(); // Solo necesitamos actualizar la lista del modal
  render(); // Y los botones de fondo
  updateFloat();
}

function updateFloat() {
  const count = Object.values(cart).reduce((a,b)=>a+b,0);
  document.getElementById('countBadge').innerText = count;
  const btn = document.getElementById('cart-float');
  if(count > 0) btn.classList.add('visible');
  else btn.classList.remove('visible');
}

function renderList() {
  const list = document.getElementById('orderList');
  list.innerHTML = '';
  
  // Modo visualizaci√≥n: si estamos en modo camarero, forzamos ES
  const isWaiter = document.body.classList.contains('waiter-active');
  const displayLang = isWaiter ? 'es' : lang;

  if(Object.keys(cart).length === 0) {
    list.innerHTML = `<div style="text-align:center; padding:30px; opacity:0.6">Tu lista est√° vac√≠a</div>`;
    return;
  }

  // Ordenar items
  const items = Object.keys(cart).map(id => currentMenu.find(i => i.id == id)).filter(x=>x);
  
  items.forEach(p => {
    const qty = cart[p.id];
    const pName = p.name[displayLang] || p.name['es'];
    
    if(isWaiter) {
      // ESTILO MODO CAMARERO (Grande y simple)
      list.innerHTML += `
        <div class="order-item">
          <div style="display:flex; align-items:center">
             <span class="waiter-qty-big">${qty}</span>
             <span class="order-name">${pName}</span>
          </div>
        </div>
      `;
    } else {
      // ESTILO MODO USUARIO (Con controles + -)
      list.innerHTML += `
        <div class="order-item">
          <span style="font-weight:600; flex:1">${pName}</span>
          <div class="qty-controls">
            <button class="qty-btn" onclick="remove(${p.id})">-</button>
            <span style="font-weight:700; width:20px; text-align:center">${qty}</span>
            <button class="qty-btn" onclick="add(${p.id})">+</button>
          </div>
        </div>
      `;
    }
  });
}

/* --- UTILIDADES Y MODOS --- */
function saveCart() { localStorage.setItem('demo_cart', JSON.stringify(cart)); }
function loadCart() { const s = localStorage.getItem('demo_cart'); if(s) cart = JSON.parse(s); }
function saveNotes() { localStorage.setItem('demo_notes', document.getElementById('notesField').value); }
function clearCart() { if(confirm("¬øBorrar todo?")) { cart={}; saveCart(); render(); updateFloat(); closeSheet(); } }

function openSheet() { 
  document.getElementById('overlay').classList.add('open'); 
  // Mostrar controles de camarero solo si el idioma NO es espa√±ol
  document.getElementById('waiterBox').style.display = (lang === 'es') ? 'none' : 'block';
  renderList();
}
function closeSheet() { exitWaiterMode(); document.getElementById('overlay').classList.remove('open'); }

function enterWaiterMode() {
  document.body.classList.add('waiter-active');
  document.getElementById('orderSheet').classList.add('waiter-mode');
  document.getElementById('closeWaiterBtn').style.display = 'flex';
  document.getElementById('waiterBox').style.display = 'none'; // Ocultar boton trigger
  document.getElementById('notesArea').style.display = 'none'; // Ocultar input notas
  renderList(); // Re-renderizar en Espa√±ol y Grande
}

function exitWaiterMode() {
  document.body.classList.remove('waiter-active');
  document.getElementById('orderSheet').classList.remove('waiter-mode');
  document.getElementById('closeWaiterBtn').style.display = 'none';
  if(lang !== 'es') document.getElementById('waiterBox').style.display = 'block';
  document.getElementById('notesArea').style.display = 'block';
  renderList(); // Volver a normal
}

/* --- TRADUCCI√ìN UI --- */
const uiDict = {
  es: { ent:"Entrantes", main:"Principales", des:"Postres", drk:"Bebidas", btn:"Ver Pedido", title:"Tu Pedido", clear:"Borrar todo", trans:"Mostrar al Camarero (ES)" },
  en: { ent:"Starters", main:"Mains", des:"Desserts", drk:"Drinks", btn:"View Order", title:"Your Order", clear:"Clear all", trans:"Show Waiter (ES)" },
  de: { ent:"Vorspeisen", main:"Hauptgerichte", des:"Dessert", drk:"Getr√§nke", btn:"Bestellung", title:"Deine Bestellung", clear:"L√∂schen", trans:"Kellner zeigen (ES)" },
  fr: { ent:"Entr√©es", main:"Plats", des:"Desserts", drk:"Boissons", btn:"Voir Commande", title:"Votre Commande", clear:"Effacer", trans:"Montrer au serveur (ES)" },
  it: { ent:"Antipasti", main:"Piatti", des:"Dolci", drk:"Bevande", btn:"Vedi Ordine", title:"Il tuo Ordine", clear:"Cancellare", trans:"Mostra al cameriere (ES)" }
};

function translateUI() {
  const t = uiDict[lang] || uiDict['es'];
  document.getElementById('f-ent').innerText = t.ent;
  document.getElementById('f-main').innerText = t.main;
  document.getElementById('f-des').innerText = t.des;
  document.getElementById('f-drk').innerText = t.drk;
  document.getElementById('btnText').innerText = t.btn;
  document.getElementById('modalTitle').innerText = t.title;
  document.getElementById('clearTxt').innerText = t.clear;
  document.getElementById('transText').innerText = t.trans;
}

/* --- TEMA OSCURO --- */
const themeBtn = document.getElementById('themeBtn');
themeBtn.addEventListener('click', () => {
  const current = document.documentElement.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
  updateThemeIcon(next);
});

function updateThemeIcon(theme) {
  themeBtn.innerHTML = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
}
// Init Theme
const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
document.documentElement.setAttribute('data-theme', savedTheme);
updateThemeIcon(savedTheme);

// GO
init();
</script>
</body>
</html>