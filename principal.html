<!-- Selector de idioma mejorado -->
<div class="lang-input">
  <label for="lang-user">Selecciona tu idioma:</label>
  <input type="text" id="lang-user" list="langs" placeholder="Escribe tu idioma">
  <datalist id="langs">
    <option value="Español" data-code="es">
    <option value="English" data-code="en">
    <option value="Deutsch" data-code="de">
    <option value="Français" data-code="fr">
    <option value="Italiano" data-code="it">
    <option value="Nederlands" data-code="nl">
  </datalist>
</div>

<style>
.lang-input {
  margin-bottom: 30px;
  text-align: center;
}
.lang-input label {
  display: block;
  margin-bottom: 5px;
  font-weight: 600;
}
#lang-user {
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid #ddd;
  font-family: 'Poppins', sans-serif;
  font-weight: 600;
  width: 160px;
  text-align: left;
  cursor: pointer;
}
</style>

<script>
const langInput = document.getElementById("lang-user");
const langOptions = Array.from(document.querySelectorAll("#langs option"));

// Detectar idioma inicial
const savedLang = localStorage.getItem('userLang') || navigator.language.slice(0,2);
const supported = ['es','en','de','fr','it','nl'];
let initialLang = supported.includes(savedLang) ? savedLang : 'es';
const initialOption = langOptions.find(o => o.dataset.code === initialLang);
if(initialOption) langInput.value = initialOption.value;

// Cambiar idioma al escribir o seleccionar
langInput.addEventListener("change", ()=>{
  const selectedOption = langOptions.find(o => o.value.toLowerCase() === langInput.value.toLowerCase());
  const code = selectedOption ? selectedOption.dataset.code : 'es';
  setLanguage(code);
});
</script>
