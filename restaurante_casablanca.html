<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="theme-color" content="#0b0f18">
<title>¬øC√≥mo fue tu experiencia?</title>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<style>
  :root{
    --text:#0b0f18; --muted:#566073;
    --brand:#0b0f18; --ok:#16a34a; --google:#2563eb;
    --card:#ffffff; --bg:#f7f7fb; --border:#e6e8ee;
  }
  *,*::before,*::after{box-sizing:border-box}
  html,body{margin:0; height:100%}
  body{
    min-height:100svh;
    display:flex; align-items:center; justify-content:center;
    padding:12px;
    font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    color:var(--text);
    background:radial-gradient(1200px 800px at 10% -10%, #f1f5ff 0, #fff 60%) no-repeat,var(--bg);
  }

  .card{
    width:min(580px, 100%);
    max-height:100svh;
    display:flex; flex-direction:column; gap:14px;
    background:var(--card);
    border:1px solid var(--border);
    border-radius:20px;
    padding:18px;
    box-shadow:0 18px 45px rgba(12,20,33,.08);
    position:relative;
  }

  /* Idiomas */
  #lang-selector{position:absolute; top:12px; right:12px; z-index:10;}
  #current-lang{
    cursor:pointer; font-size:24px; padding:4px; border-radius:8px;
    background:rgba(0,0,0,.04); display:grid; place-items:center;
  }
  .brand{display:flex; flex-direction:column; align-items:center; gap:6px}
  .logo{width:68px; height:68px; border-radius:50%; overflow:hidden; display:grid; place-items:center; background:#fff; box-shadow:0 4px 10px rgba(0,0,0,.08)}
  .logo img{width:100%; height:100%; object-fit:cover}
  .brand h1{margin:6px 0 0; font-size:22px; line-height:1.2; text-align:center}
  .brand p{margin:2px 0 0; color:var(--muted); font-size:14px; text-align:center}

  .grid{display:grid; gap:12px}
  @media(min-width:560px){ .grid{grid-template-columns:1fr 1fr} }

  .tile{
    border:1px solid var(--border); border-radius:16px; background:#fff;
    padding:12px; display:flex; flex-direction:column; align-items:center;
  }
  .tile h2{margin:0 0 6px; font-size:16px; text-align:center}
  .tile p{margin:0 0 10px; font-size:13px; color:var(--muted); text-align:center}
  .btn{
    display:block; width:100%; text-align:center; text-decoration:none;
    padding:14px 16px; border-radius:12px; font-weight:800; font-size:15px; color:#fff;
    box-shadow:0 4px 12px rgba(0,0,0,.1); transition:transform .06s ease;
  }
  .btn:active{transform:translateY(1px)}
  .btn-google{background:linear-gradient(180deg,#6baeff,var(--google))}
  .btn-private{background:linear-gradient(180deg,#4ade80,var(--ok))}
  .note{font-size:12px; color:var(--muted); text-align:center}

  /* Compartir */
  .share-tile{
    text-align:center;
    border:1px solid var(--border);
    border-radius:16px;
    padding:16px;
    box-shadow:0 4px 12px rgba(0,0,0,.05);
  }
  .share-buttons{
    display:flex; flex-wrap:wrap; justify-content:center; gap:8px; margin-top:10px;
  }
  .share-btn{
    flex:1 1 auto; min-width:110px; text-align:center; font-weight:700;
    border-radius:10px; padding:10px 12px; font-size:14px; color:#fff; text-decoration:none;
    cursor:pointer; box-shadow:0 3px 8px rgba(0,0,0,.1); transition:transform .06s ease;
  }
  .share-btn:active{transform:translateY(1px)}
  .whatsapp{background:#25D366;}
  .telegram{background:#0088cc;}
  .instagram{background:linear-gradient(45deg,#f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);}
  .copy{background:#64748b;}

  /* Tarjeta generada */
  #cardPreview{
    display:none;
    margin-top:12px;
    padding:16px;
    border:1px solid var(--border);
    border-radius:16px;
    background:#fff;
    text-align:center;
    font-family:inherit;
  }
  #cardPreview h3{margin:8px 0;font-size:20px;}
  #cardPreview p{margin:6px 0;color:#333;}
  #userMessage{width:100%;border:1px solid var(--border);border-radius:8px;padding:8px;margin-top:8px;font-size:13px;}
  #generateCard{background:#0b0f18;color:#fff;padding:10px 14px;border:none;border-radius:10px;font-weight:700;cursor:pointer;margin-top:10px;}
  #shareGenerated{display:none;margin-top:8px;padding:8px 14px;background:#2563eb;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;}
</style>
</head>
<body>
<main class="card" role="main" aria-labelledby="t">
  <header class="brand">
    <div class="logo"><img src="img/imagen_circular_recortada.png" alt="Logo"></div>
    <h1 id="t"><span id="brandName">Restaurante Casablanca</span></h1>
    <p>Cu√©ntanos en 10&nbsp;segundos c√≥mo fue todo.</p>
  </header>

  <div class="grid">
    <section class="tile">
      <h2>‚≠ê Rese√±a p√∫blica</h2>
      <p>Si te fue bien, tu rese√±a nos da visibilidad en Google.</p>
      <a id="btnGoogle" class="btn btn-google" target="_blank" rel="noopener">Dejar rese√±a en Google</a>
      <div class="note">Queda visible para todos.</div>
    </section>

    <section class="tile">
      <h2>üìù Comentario privado</h2>
      <p>Si algo fall√≥, cu√©ntanos y lo arreglamos contigo.</p>
      <a id="btnPrivate" class="btn btn-private" target="_blank" rel="noopener">Enviar comentario privado</a>
      <div class="note">Solo lo vemos nosotros.</div>
    </section>
  </div>

  <p class="note"><strong>¬°Gracias por tu tiempo!</strong></p>

  <!-- üî• Bloque de compartir -->
  <section class="tile share-tile">
    <h2>üì§ Comparte el restaurante</h2>
    <p>¬øTe gust√≥ la experiencia? ¬°Recomi√©ndanos o crea tu tarjeta! üí´</p>
    <div class="share-buttons">
      <a id="shareWhatsapp" class="share-btn whatsapp" target="_blank" rel="noopener">WhatsApp</a>
      <a id="shareTelegram" class="share-btn telegram" target="_blank" rel="noopener">Telegram</a>
      <a id="shareInstagram" class="share-btn instagram" target="_blank" rel="noopener">Instagram</a>
      <button id="copyLink" class="share-btn copy">Copiar enlace</button>
    </div>

    <!-- Tarjeta de experiencia -->
    <div id="cardPreview">
      <h3>He visitado Terraza Casa Blanca üç∏</h3>
      <p>y me encant√≥ üòç</p>
      <p>üìç <a href="https://www.google.com/maps/place/Terraza+Casa+Blanca+Las+Canteras/@28.141278,-15.4374678,768m/data=!3m2!1e3!4b1!4m6!3m5!1s0xc409546bd250fb7:0x1844c8ed175e5104!8m2!3d28.141278!4d-15.4348929!16s%2Fg%2F11qb8pxwyk" target="_blank" style="color:#2563eb;text-decoration:none;">Ver ubicaci√≥n</a></p>
      <textarea id="userMessage" placeholder="Escribe aqu√≠ algo sobre tu experiencia (opcional)"></textarea>
      <button id="generateCard">Generar tarjeta</button>
      <button id="shareGenerated">Compartir tarjeta</button>
    </div>
  </section>
</main>

<script>
const MAPS_URL = "https://www.google.com/maps/place/Terraza+Casa+Blanca+Las+Canteras/@28.141278,-15.4374678,768m/data=!3m2!1e3!4b1!4m6!3m5!1s0xc409546bd250fb7:0x1844c8ed175e5104!8m2!3d28.141278!4d-15.4348929!16s%2Fg%2F11qb8pxwyk";

function setupShareSection(){
  const message = encodeURIComponent("‚ú® Te recomiendo Terraza Casa Blanca üçπ ‚Äî comida genial y vistas incre√≠bles frente al mar üåÖ");
  const full = `${message}%0A${encodeURIComponent(MAPS_URL)}`;
  document.getElementById("shareWhatsapp").href = `https://wa.me/?text=${full}`;
  document.getElementById("shareTelegram").href = `https://t.me/share/url?url=${encodeURIComponent(MAPS_URL)}&text=${message}`;
  document.getElementById("shareInstagram").href = "https://www.instagram.com/";
  document.getElementById("copyLink").addEventListener("click", async()=>{
    try{
      await navigator.clipboard.writeText(MAPS_URL);
      const b=document.getElementById("copyLink");
      b.textContent="¬°Copiado!";
      setTimeout(()=>b.textContent="Copiar enlace",2000);
    }catch(e){alert("No se pudo copiar el enlace");}
  });
}

// === Generador de tarjeta ===
const generateBtn = document.getElementById("generateCard");
const shareBtn = document.getElementById("shareGenerated");
generateBtn.addEventListener("click",()=>{
  html2canvas(document.getElementById("cardPreview")).then(canvas=>{
    const link=document.createElement("a");
    link.download="Mi_experiencia_Casablanca.png";
    link.href=canvas.toDataURL();
    link.click();
    shareBtn.style.display="inline-block";
  });
});

shareBtn.addEventListener("click",()=>{
  html2canvas(document.getElementById("cardPreview")).then(canvas=>{
    canvas.toBlob(blob=>{
      const file = new File([blob],"Mi_experiencia_Casablanca.png",{type:"image/png"});
      if(navigator.share){
        navigator.share({
          title:"Mi experiencia en Terraza Casa Blanca",
          text:"He visitado Terraza Casa Blanca üç∏ y me encant√≥ üòç",
          files:[file]
        });
      }else{
        alert("Tu navegador no soporta compartir im√°genes directamente.");
      }
    });
  });
});

(function init(){
  setupShareSection();
})();
</script>
</body>
</html>

