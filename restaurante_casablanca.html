<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="theme-color" content="#ffffff">
<title>¿Cómo fue tu experiencia?</title>
<style>
  :root{
    --text:#0b0f18; --muted:#6b7280;
    --accent:#2563eb; --ok:#16a34a;
    --card:#ffffff; --bg:#f4f5f7; --border:#e5e7eb;
  }
  *{box-sizing:border-box;}
  html,body{margin:0; padding:0; height:100%; font-family:system-ui, -apple-system, Roboto, sans-serif; background:var(--bg); color:var(--text);}
  body{display:flex; align-items:center; justify-content:center; padding:12px;}

  .card{
    width:100%; max-width:420px; height:100svh;
    display:flex; flex-direction:column; justify-content:space-between;
    background:var(--card); border-radius:24px; box-shadow:0 8px 28px rgba(0,0,0,.08);
    overflow:hidden; position:relative; padding:20px;
  }

  /* Idioma */
  #lang-selector{position:absolute; top:12px; right:12px;}
  #current-lang{
    cursor:pointer; background:rgba(0,0,0,.05);
    padding:6px 10px; border-radius:8px; font-size:18px;
  }
  #lang-options{
    display:none; position:absolute; right:0; top:40px;
    background:#fff; border:1px solid var(--border); border-radius:10px;
    box-shadow:0 4px 10px rgba(0,0,0,.1); z-index:30;
  }
  .lang-option{padding:8px 12px; font-weight:600; cursor:pointer;}
  .lang-option:hover{background:var(--bg);}

  header{text-align:center;}
  .logo{width:70px; height:70px; border-radius:50%; overflow:hidden; margin:0 auto 8px;}
  .logo img{width:100%; height:100%; object-fit:cover;}
  h1{font-size:20px; margin:0;}
  p.subtitle{font-size:14px; color:var(--muted); margin-top:4px;}

  .grid{display:grid; gap:10px;}
  .tile{
    border:1px solid var(--border); border-radius:16px; padding:14px; text-align:center;
    background:#fff;
  }
  .tile h2{margin:0 0 6px; font-size:15px;}
  .tile p{margin:0 0 10px; font-size:13px; color:var(--muted);}
  .btn{
    display:block; width:100%; text-align:center;
    background:var(--accent); color:#fff; border:none; border-radius:12px;
    padding:12px; font-weight:700; text-decoration:none;
  }
  .btn:active{opacity:.9;}
  .btn-google{background:linear-gradient(180deg,#6baeff,var(--accent));}
  .btn-private{background:linear-gradient(180deg,#4ade80,var(--ok));}
  .btn-share{background:linear-gradient(180deg,#facc15,#fbbf24); color:#000;}

  .note{text-align:center; font-size:12px; color:var(--muted); margin-top:10px;}
</style>
</head>
<body>
  <main class="card" id="mainCard" aria-labelledby="t">
    <header>
      <div id="lang-selector" aria-haspopup="true">
        <div id="current-lang" aria-label="Cambiar idioma">🇪🇸</div>
        <div id="lang-options" role="menu" aria-hidden="true"></div>
      </div>

      <div class="logo"><img src="img/imagen_circular_recortada.png" alt="Logo Casablanca"></div>
      <h1 id="t">Restaurante Casablanca</h1>
      <p id="subtitle" class="subtitle">Cuéntanos en 10 segundos cómo fue todo.</p>
    </header>

    <div class="grid" role="main">
      <section class="tile" aria-labelledby="publicTitle">
        <h2 id="publicTitle">⭐ Reseña pública</h2>
        <p id="publicText">Tu reseña nos da visibilidad en Google.</p>
        <a id="btnGoogle" class="btn btn-google" target="_blank" rel="noopener">Dejar reseña</a>
      </section>

      <section class="tile" aria-labelledby="privateTitle">
        <h2 id="privateTitle">📝 Comentario privado</h2>
        <p id="privateText">Si algo falló, cuéntanos y lo arreglamos contigo.</p>
        <a id="btnPrivate" class="btn btn-private" target="_blank" rel="noopener">Enviar comentario</a>
      </section>
    </div>

    <a id="openShare" href="compartir.html" class="btn btn-share" style="margin-top:10px;">📸 Compartir experiencia</a>

    <p class="note" id="thanks"><strong>¡Gracias por tu tiempo!</strong></p>
  </main>

<script>
/* Config */
const RESTAURANT_NAME = "Restaurante Casablanca · Las Canteras";
const GOOGLE_MAPS_SHORT = "https://maps.app.goo.gl/CasablancaLasCanteras";

/* Tally form links por idioma */
const TALLY_LINKS = {
  es: "https://tally.so/r/w2Qla9",
  en: "https://tally.so/r/w20k9D",
  de: "https://tally.so/r/mBN1q1",
  fr: "https://tally.so/r/mek0Dk"
};

/* Banderas */
const FLAGS = { es:"🇪🇸", en:"🇬🇧", de:"🇩🇪", fr:"🇫🇷" };

/* Copia multilenguaje (UI) */
const COPY = {
  es:{pageTitle:"¿Cómo fue tu experiencia?", subtitle:"Cuéntanos en 10 segundos cómo fue todo.", publicTitle:"⭐ Reseña pública", publicText:"Tu reseña nos da visibilidad en Google.", publicBtn:"Dejar reseña", publicNote:"Queda visible para todos.", privateTitle:"📝 Comentario privado", privateText:"Si algo falló, cuéntanos y lo arreglamos contigo.", privateBtn:"Enviar comentario", privateNote:"Solo lo vemos nosotros.", shareTitle:"📸 Compartir experiencia", shareBtn:"Compartir experiencia", thanks:"¡Gracias por tu tiempo!", langSelectorTitle:"Cambiar idioma"},
  en:{pageTitle:"How was your experience?", subtitle:"Tell us in 10 seconds how it went.", publicTitle:"⭐ Public review", publicText:"Your review helps us on Google.", publicBtn:"Leave a review", publicNote:"Visible to everyone.", privateTitle:"📝 Private feedback", privateText:"If something went wrong, tell us and we’ll fix it.", privateBtn:"Send feedback", privateNote:"Only we can see it.", shareTitle:"📸 Share experience", shareBtn:"Share experience", thanks:"Thanks for your time!", langSelectorTitle:"Change language"},
  de:{pageTitle:"Wie war Ihre Erfahrung?", subtitle:"Erzählen Sie uns in 10 Sekunden, wie alles war.", publicTitle:"⭐ Öffentliche Bewertung", publicText:"Ihre Bewertung hilft uns bei Google.", publicBtn:"Bewertung abgeben", publicNote:"Für alle sichtbar.", privateTitle:"📝 Privates Feedback", privateText:"Wenn etwas schiefging, sagen Sie es uns bitte.", privateBtn:"Feedback senden", privateNote:"Nur wir sehen es.", shareTitle:"📸 Erfahrung teilen", shareBtn:"Erfahrung teilen", thanks:"Vielen Dank für Ihre Zeit!", langSelectorTitle:"Sprache ändern"},
  fr:{pageTitle:"Comment était votre expérience ?", subtitle:"Racontez-nous en 10 secondes comment tout s'est passé.", publicTitle:"⭐ Avis public", publicText:"Votre avis nous aide sur Google.", publicBtn:"Laisser un avis", publicNote:"Visible par tout le monde.", privateTitle:"📝 Commentaire privé", privateText:"S'il y a eu un souci, dites-le nous.", privateBtn:"Envoyer un commentaire", privateNote:"Seulement nous le voyons.", shareTitle:"📸 Partager l'expérience", shareBtn:"Partager", thanks:"Merci pour votre temps !", langSelectorTitle:"Changer de langue"}
};

/* Helpers idioma */
const LANGS = Object.keys(COPY);
function getInitialLang(){
  const saved = localStorage.getItem('userLang');
  if(saved && COPY[saved]) return saved;
  const browser = navigator.languages || [navigator.language || 'es'];
  for(const b of browser){ const c = b.slice(0,2); if(COPY[c]) return c; }
  return 'es';
}
function setLang(lang){
  if(!COPY[lang]) lang = 'es';
  const d = COPY[lang];
  document.documentElement.lang = lang;
  document.title = d.pageTitle;
  document.getElementById('subtitle').textContent = d.subtitle;
  document.getElementById('publicTitle').textContent = d.publicTitle;
  document.getElementById('publicText').textContent = d.publicText;
  document.getElementById('btnGoogle').textContent = d.publicBtn;
  document.getElementById('publicNote')?.textContent = d.publicNote;
  document.getElementById('privateTitle').textContent = d.privateTitle;
  document.getElementById('privateText').textContent = d.privateText;
  document.getElementById('btnPrivate').textContent = d.privateBtn;
  document.getElementById('privateNote')?.textContent = d.privateNote;
  document.getElementById('openShare').textContent = d.shareBtn ? "📸 " + d.shareBtn : d.shareBtn;
  document.getElementById('thanks').innerHTML = `<strong>${d.thanks}</strong>`;
  document.getElementById('current-lang').textContent = FLAGS[lang] || '🇪🇸';
  // poner el formulario Tally según idioma
  document.getElementById('btnPrivate').href = TALLY_LINKS[lang] || TALLY_LINKS['es'];
  // guardar
  localStorage.setItem('userLang', lang);
  // hide lang options
  document.getElementById('lang-options').style.display = 'none';
}

/* crear selector de idiomas */
function createLangSelector(){
  const options = document.getElementById('lang-options');
  options.innerHTML = '';
  LANGS.forEach(code=>{
    const o = document.createElement('div');
    o.className = 'lang-option';
    o.textContent = `${FLAGS[code]} ${code.toUpperCase()}`;
    o.addEventListener('click', ()=> setLang(code));
    options.appendChild(o);
  });
  document.getElementById('current-lang').addEventListener('click', (e)=>{
    e.stopPropagation();
    options.style.display = options.style.display === 'block' ? 'none' : 'block';
  });
  document.addEventListener('click', (e) => {
    if(!document.getElementById('lang-selector').contains(e.target)){
      options.style.display = 'none';
    }
  });
}

/* init */
(function init(){
  document.getElementById('brandName').textContent = RESTAURANT_NAME;
  document.getElementById('btnGoogle').href = GOOGLE_MAPS_SHORT;
  createLangSelector();
  setLang(getInitialLang());
})();
</script>
</body>
</html>
